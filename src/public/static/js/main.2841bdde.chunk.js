(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t,a){e.exports=a(298)},254:function(e,t){},295:function(e,t,a){},296:function(e,t,a){},298:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),s=a.n(c),o=a(10),l=a(9),m=a(139),u=a(304),i=a(5),d={isLoggedIn:!1,_id:null,token:null,currentChatroom:"5f52268b6d59e14df8174254",user:{}},h=a(38),p=a(28),f=a(63),b=a.n(f),E=[],v=Object(l.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHECK_AUTH":case"SET_CHATROOM":case"LOG_IN":return Object(i.a)(Object(i.a)({},e),t.payload);case"LOG_OUT":return Object(i.a)(Object(i.a)({},e),d);default:return e}},chatrooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CHATROOMS":return Object(i.a)(Object(i.a)({},e),b.a.mapKeys(t.payload,"_id"));case"CREATE_CHATROOM":return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},t.payload._id,Object(i.a)({},t.payload)));case"FETCH_MESSAGES":return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},t.payload.chatroomId,Object(i.a)(Object(i.a)({},e[t.payload.chatroomId]),{},{messages:[].concat(Object(h.a)(e[t.payload.chatroomId].messages),Object(h.a)(t.payload.messages))})));case"RECEIVE_MESSAGE":return Object(i.a)(Object(i.a)({},e),{},Object(p.a)({},t.payload.chatroomId,Object(i.a)(Object(i.a)({},e[t.payload.chatroomId]),{},{messages:[].concat(Object(h.a)(e[t.payload.chatroomId].messages),[t.payload.message])})));case"LOG_OUT":return[].concat(E);default:return e}},form:u.a}),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,g=Object(l.e)(v,_(Object(l.a)(m.a))),y=a(301),N=a(23),O=Object(N.a)(),w=a(16),j=a(7),x=a.n(j),C=a(13),k=a(141),S=a.n(k).a.create({baseURL:"https://young-oasis-67409.herokuapp.com",headers:{"Content-Security-Policy":"default-src *"}}),I=a(142),A=a.n(I)()(),T=function(e,t){return{type:e,payload:{chatroomId:t.chatroomId,message:t}}};A.on("return-message",(function(e){g.dispatch(T("RECEIVE_MESSAGE",e))})),A.on("system-message",(function(e){g.dispatch(T("RECEIVE_MESSAGE",e))}));var H=r.a.createElement("svg",{width:"1.2em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-person",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M10 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6 5c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"})),M=r.a.createElement("svg",{width:"1.2em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-chat-right-text",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M2 1h12a1 1 0 0 1 1 1v11.586l-2-2A2 2 0 0 0 11.586 11H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"})),R=r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-plus-square",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})),L=r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-pencil-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"})),F=Object(o.b)((function(e){return{auth:e.auth,chatrooms:e.chatrooms}}),{createChatroom:function(e,t){return function(){var a=Object(C.a)(x.a.mark((function a(n){var r,c;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,S.post("/chatrooms/create",{name:e,createdBy:t});case 3:r=a.sent,c=r.data,n({type:"CREATE_CHATROOM",payload:Object(i.a)(Object(i.a)({},c.chatroom),{},{messages:[]})}),O.push("/chats/".concat(c.chatroom._id)),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:"ERROR",error:"Invalid Name"});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},setChatroom:function(e){return function(){var t=Object(C.a)(x.a.mark((function t(a){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SET_CHATROOM",payload:{currentChatroom:e}});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.auth,a=e.chatrooms,c=e.setChatroom,s=e.createChatroom,o=(e.closeChat,Object(n.useState)("")),l=Object(w.a)(o,2),m=l[0],u=l[1],i=function(e){u(e.target.value)},d=function(e){e.preventDefault(),m.length>=5&&(s(m,t._id),u(""))},h=function(){if(a!=={})return Object.keys(a).map((function(e){return r.a.createElement("li",{key:e,className:"chatroom__item ".concat(t.currentChatroom===e?"chatroom__item-active":"")},r.a.createElement("div",{className:"chatroom__icon col-2 my-auto text-secondary"},H),r.a.createElement("div",{className:"col-8 px-0"},r.a.createElement("div",{className:"col text-center text-white h-100"},r.a.createElement("div",{onClick:function(){return c(t=e),void O.push("/chats/".concat(t));var t},className:"chatroom__chatroom"}," ",r.a.createElement("div",{className:"col text-left"},a[e].name)))),r.a.createElement("div",{className:"chatroom__cta-col"},r.a.createElement("button",{className:"chatroom__cta-close p-0 text-secondary"},r.a.createElement("p",{className:"chatroom__close"},"\ud83d\uddd9"))))}))};return r.a.createElement("div",{className:"chatroom__list"},r.a.createElement("ul",{className:"chatroom__list list-unstyled"},r.a.createElement("li",{className:"chatroom__new"},r.a.createElement(q,{handleForm:d,onChange:i,newRoomName:m})),h()))})),U=a(64),z=a.n(U),D=a(303),V=Object(o.b)((function(e){return{auth:e.auth}}),{userLogout:function(){return function(){var e=Object(C.a)(x.a.mark((function e(t,a){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().auth.token,e.next=3,S.post("/users/logout",{},{headers:{Authorization:"Bearer ".concat(n)}});case 3:return e.next=5,localStorage.removeItem("jwt-token");case 5:t({type:"LOG_OUT"}),O.push("/");case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},userDelete:function(){return function(){var e=Object(C.a)(x.a.mark((function e(t,a){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().auth.token,e.next=3,S.post("/users/delete",{},{headers:{Authorization:"Bearer ".concat(n)}});case 3:if(!e.sent.data.userDeleted){e.next=9;break}return e.next=7,localStorage.removeItem("jwt-token");case 7:t({type:"LOG_OUT"}),O.push("/");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},userUpdate:function(e){return function(){var t=Object(C.a)(x.a.mark((function t(a,n){var r,c,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.token,t.next=3,S.patch("./users/update",Object(i.a)({},e),{headers:{Authorization:"Bearer ".concat(r)}});case 3:if(!(c=t.sent).data.error){t.next=8;break}return 11e3===(s=c.data.error).code&&alert('The username "'.concat(s.keyValue.username,'" has already been taken.')),t.abrupt("return");case 8:a({type:"UPDATE_USER",payload:c.data.user});case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})((function(e){var t=e.auth,a=e.userLogout,c=e.userUpdate,s=e.userDelete,o=Object(n.useState)(""),l=Object(w.a)(o,2),m=l[0],u=l[1],i=Object(n.useState)(!1),d=Object(w.a)(i,2),h=d[0],p=d[1];Object(n.useEffect)((function(){}),[t.user]);var f=function(e){c(e),u("")},E=function(e){var t=e.input,a=e.placeholder,n=void 0===a?null:a,c=e.label,s=e.meta,o="field ".concat(s.error&&s.touched?"error":"");return r.a.createElement("li",{className:"profile__group list-group-item"},r.a.createElement("div",{className:"row justify-content-between align-items-center ".concat(o)},r.a.createElement("div",{className:"col-3 text-left p-0"},r.a.createElement("label",{className:"m-auto font-weight-bold"},c)),r.a.createElement("div",{className:"col-7 mx-0 pl-2"},m===c?r.a.createElement("input",Object.assign({className:"form-control text-left text-white"},t)):r.a.createElement("input",Object.assign({className:"form-control-plaintext text-left text-white"},t,{placeholder:n}))),r.a.createElement("div",{onClick:function(){return u(c)},className:"profile__edit col-1"},L),function(e){var t=e.error;if(e.touched&&t)return r.a.createElement("div",{className:"ui error message"},r.a.createElement("div",{className:"header"},t))}(s)))},v=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card profile__card"},r.a.createElement("div",{className:"card-img-top d-flex justify-content-center"},r.a.createElement("img",{className:"card__image mt-3",src:"data:image/png;base64,".concat(t.user.avatar),height:"150",width:"150",alt:"avatar"})),r.a.createElement("div",{className:"card-body"},r.a.createElement(G,{handleForm:f,initialValues:b.a.pick(t.user,"name","username","email","password")},r.a.createElement("ul",{className:"profile__list list-group list-group-flush"},r.a.createElement(D.a,{name:"name",component:E,label:"Name"}),r.a.createElement(D.a,{name:"username",component:E,label:"Username"}),r.a.createElement(D.a,{name:"email",component:E,label:"Email"}),r.a.createElement(D.a,{name:"password",component:E,label:"Password",placeholder:"*********"}),r.a.createElement("li",{className:"profile__list list-group-item"},r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col text-center"},"User Since:"," ",z()(t.user.createdAt).format("MMM 'YY"))))),r.a.createElement("input",{type:"submit",className:"profile__submit",tabIndex:"-1"})),r.a.createElement("ul",{className:" list-group list-group-flush"},r.a.createElement("li",{className:"profile__list list-group-item m-auto"},r.a.createElement("button",{onClick:function(){a()},className:"profile__cta-logout btn mt-2"},"Log Out")),r.a.createElement("li",{className:"profile__list list-group-item m-auto"},r.a.createElement("button",{onClick:function(){return p(!0)},className:"profile__cta-delete btn",disabled:"5f637fdd0a41ae691c828e50"===t.user._id},"Delete Account"))))));return r.a.createElement("div",{className:"profile__display"},v,r.a.createElement(te,{modalConfig:{title:"Delete Account",message:"Are you sure you want to delete your account?",btnText:"Delete",btnStyle:"danger"},setModalDisplay:p,modalDisplay:h,handleDelete:function(){s()}}))})),B=a(302),G=Object(B.a)({form:"userForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit((function(t){var a=e.initialValues;if(!a)return e.handleForm(t);Object.keys(t).some((function(e){return""===t[e]}))&&e.reset();var n={};Object.keys(a).forEach((function(e){a[e]!==t[e]&&(n=Object(i.a)(Object(i.a)({},n),{},Object(p.a)({},e,t[e])))})),e.handleForm(n)})),className:"form-signin mt-2"},e.children)})),P=function(e){var t=function(e){var t=e.input,a=e.label,n=e.type;return r.a.createElement("div",null,r.a.createElement("label",{className:"text-white text-left my-2"},a),r.a.createElement("input",Object.assign({className:"form-control",placeholder:a},t,{type:n,required:!0})))};return r.a.createElement(G,{handleForm:function(t){e.handleForm(t)}},r.a.createElement("div",{className:"ui stacked element"},r.a.createElement(D.a,{name:"username",component:t,label:"Username",type:"text"}),r.a.createElement(D.a,{name:"password",component:t,label:"Password",type:"password"}),r.a.createElement("button",{className:"btn btn-md btn-secondary btn-block my-4 mx-auto w-25"},"Submit")),r.a.createElement("div",{className:"d-flex w-100 justify-content-center text-white"},r.a.createElement("div",{className:"col"},r.a.createElement("p",{className:"m-0 p-0"},"Sample User Credentials"),r.a.createElement("p",{className:"m-0 p-0"},"Username: sampleuser"),r.a.createElement("p",{className:"m-0 p-0"},"Password: examplepass000"))))},K=function(e){var t=function(e){var t=e.input,a=e.label,n=e.type;return r.a.createElement("div",null,r.a.createElement("label",{className:"text-white text-left my-2"},a),r.a.createElement("input",Object.assign({className:"form-control",type:n,placeholder:a},t,{required:!0})))};return r.a.createElement(G,{handleForm:function(t){e.handleForm(t)}},r.a.createElement(D.a,{name:"name",component:t,label:"Name",type:"text"}),r.a.createElement(D.a,{name:"username",component:t,label:"Username",type:"text"}),r.a.createElement(D.a,{name:"email",component:t,label:"Email",type:"email"}),r.a.createElement(D.a,{name:"password",component:t,label:"Password",type:"password"}),r.a.createElement(D.a,{name:"passwordConf",component:t,label:"Confirm Password",type:"password"}),r.a.createElement("button",{className:"btn btn-md btn-secondary btn-block mt-4 mx-auto w-50"},"Submit"))},q=function(e){var t=e.newRoomName.length<5&&0!==e.newRoomName.length?"is-invalid":null;return r.a.createElement("form",{className:"w-100",onSubmit:function(t){e.handleForm(t)}},r.a.createElement("div",{className:"chatroom__form"},r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{onChange:function(t){e.onChange(t)},className:"form-control ".concat(t),type:"text",placeholder:"Create Chat Room....",name:"chatForm",required:!0})),r.a.createElement("div",{className:"d-flex justify-content-end col-2 mx-auto"},r.a.createElement("button",{type:"submit",className:"chatroom__cta-new btn p-0"},r.a.createElement("div",{className:"chatroom__new-cta text-secondary"},R)))))},J=a(11),X=a.n(J),Y=function(e){return r.a.createElement("button",{className:X()("icon__button","btn btn-outline-dark p-0",{"text-white":e.icon===e.activeIcon,"text-secondary":e.icon!==e.activeIcon}),disabled:e.icon===e.activeIcon},"profile"===e.icon?H:"chats"===e.icon?M:void 0)},W=a(143),Q=a(68),Z=a(67),$=a(70),ee=a(69),te=function(e){var t=e.modalConfig,a=e.setModalDisplay,n=e.modalDisplay,c=e.handleDelete;return n?r.a.createElement(W.a,{show:n,onHide:function(){return a(!1)}},r.a.createElement(ee.a,{closeButton:!0},r.a.createElement($.a,null,t.title)),r.a.createElement(Z.a,null,r.a.createElement("p",null,t.message)),r.a.createElement(Q.a,null,r.a.createElement("button",{onClick:function(){return a(!1)},type:"button",className:"btn btn-secondary"},"Cancel"),r.a.createElement("button",{onClick:function(){return a(!1),void c()},className:"btn btn-".concat(t.btnStyle)},t.btnText))):r.a.createElement(r.a.Fragment,null)},ae=function(e){var t=Object(n.useState)("chats"),a=Object(w.a)(t,2),c=a[0],s=a[1],o=["profile","chats"];Object(n.useEffect)((function(){return function(){s("chats")}}),[e.auth]);return r.a.createElement("div",{className:"sidebar__content"},r.a.createElement("nav",{className:"sidebar__nav"},r.a.createElement("div",{className:"sidebar__row py-4"},r.a.createElement("h2",{className:"text-white"},"WhatsChat")),r.a.createElement("div",{className:"sidebar__row"},r.a.createElement("div",{className:"sidebar__break"})),r.a.createElement("div",{className:"sidebar__row"},r.a.createElement("ul",{className:"sidebar__list list-unstyled components py-3 mb-0"},o.map((function(e){return r.a.createElement("li",{id:"".concat(e,"-cta"),key:e,className:"nav-item",onClick:function(e){return function(e){"profile-cta"===e.currentTarget.id&&s("profile"),"chats-cta"===e.currentTarget.id&&s("chats")}(e)}},r.a.createElement(Y,{icon:e,activeIcon:c}))})))),r.a.createElement("div",{className:"sidebar__row"},r.a.createElement("div",{className:"sidebar__break"})),r.a.createElement("div",{className:"sidebar__row sidebar__row-scroll"},r.a.createElement("div",{className:"sidebar__container sidebar__container-scroll"},e.auth?"profile"===c?r.a.createElement(V,null):"chats"===c?r.a.createElement(F,null):void 0:r.a.createElement("div",{className:"sidebar__default"},"Sign In or Create an account to see available rooms and profile")))))},ne=Object(o.b)(null,{userLogin:function(e){return function(){var t=Object(C.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.post("/users/login",Object(i.a)({},e));case 2:return n=t.sent,t.next=5,localStorage.setItem("jwt-token",n.data.token);case 5:a({type:"CHECK_AUTH",payload:{_id:n.data.user._id,token:n.data.token,user:n.data.user,isLoggedIn:!0}}),O.push("/chats");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},userSignup:function(e){return function(){var t=Object(C.a)(x.a.mark((function t(a){var n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.post("/users/create",Object(i.a)({},e));case 2:if(!(n=t.sent).data.error){t.next=7;break}return 11e3===(r=n.data.error).code&&alert('The username "'.concat(r.keyValue.username,'" has already been taken.')),t.abrupt("return");case 7:localStorage.setItem("jwt-token",n.data.token),a({type:"CHECK_AUTH",payload:{_id:n.data.user._id,token:n.data.token,isLoggedIn:!0,data:n.data.user}}),O.push("/chats");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.userLogin,a=e.userSignup,c=Object(n.useState)("signup"),s=Object(w.a)(c,2),o=s[0],l=s[1],m=function(e){a(e)},u=function(e){t(e)},i=function(){"signup"===o&&l("login"),"login"===o&&l("signup")};return r.a.createElement("div",{className:"landing__area col"},r.a.createElement("div",{className:"landing__container container pb-3 px-3 bg-dark"},r.a.createElement("div",{className:"row mb-2"},r.a.createElement("div",{className:"col p-0"},r.a.createElement("button",{onClick:function(){return i()},className:X()({"btn btn-large text-white w-100 p-3":!0,"btn-outline-dark":"signup"===o,"btn-secondary":"login"===o}),disabled:"signup"===o},"Sign Up Here!")),r.a.createElement("div",{className:"col h-100 p-0"},r.a.createElement("button",{onClick:function(){return i()},className:X()({"btn btn-large text-white w-100 p-3":!0,"btn-outline-dark disabled":"login"===o,"btn-secondary":"signup"===o}),disabled:"login"===o},"Log In Here!"))),"signup"===o?r.a.createElement(K,{handleForm:m}):r.a.createElement(P,{handleForm:u})))})),re=Object(o.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.messages,a=e.auth,c=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=c.current.lastElementChild;if(e){var t=getComputedStyle(e.lastElementChild),a=parseInt(t.marginBottom),n=c.current.offsetHeight+a,r=c.current.offsetHeight;c.current.scrollHeight-n<=c.current.scrollTop+r&&(c.current.scrollTop=c.current.scrollHeight)}}),[t.length]);return r.a.createElement("div",{className:"chat__container"},r.a.createElement("ul",{className:"chat__display chat__display-scroll ",ref:c},t?Object.keys(t).map((function(e){var n,c=(n=t[e].createdAt,z()(n).format("h:mm A"));return"systemManager"===t[e].author?r.a.createElement("li",{key:1e3*Math.random(),className:"chat__messages chat__messages-system"},r.a.createElement("div",{key:e,className:"text-left"},t[e].message)):t[e].userId!==a._id?r.a.createElement("li",{key:e,className:"chat__messages chat__messages-rec"},r.a.createElement("div",{className:"chat__bubble chat__bubble-rec"},r.a.createElement("div",{className:"chat__content"},r.a.createElement("div",{className:"chat__area"},r.a.createElement("p",{className:"chat__text chat__text-author"},t[e].author),r.a.createElement("p",{className:"chat__text chat__text-message"},t[e].message)),r.a.createElement("div",{className:"chat__footer ml-1"},r.a.createElement("div",{className:"chat__timestamp"},c))))):r.a.createElement("li",{key:e,className:"chat__messages chat__messages-sent"},r.a.createElement("div",{className:"chat__bubble chat__bubble-sent"},r.a.createElement("div",{className:"chat__content"},r.a.createElement("div",{className:"chat__area"},r.a.createElement("p",{className:"chat__text chat__text-message"},t[e].message)),r.a.createElement("div",{className:"chat__footer ml-1 text-white"},r.a.createElement("div",{className:"chat__timestamp"},c)))))})):r.a.createElement("div",{className:"text-white"},"Send a message!!")))})),ce=Object(o.b)((function(e){return{auth:e.auth,chatrooms:e.chatrooms}}),{fetchMessages:function(e){return function(){var t=Object(C.a)(x.a.mark((function t(a){var n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.get("/messages/fetch?chatroomId=".concat(e));case 2:n=t.sent,r=n.data,a({type:"FETCH_MESSAGES",payload:{chatroomId:e,messages:r.messages}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},joinChatroom:function(e,t){return function(){var a=Object(C.a)(x.a.mark((function a(n){return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:A.emit("join",{room:e,username:t},(function(e){}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},sendMessage:function(e){var t=e.chatroomId,a=e.message,n=e.userId,r=e.author;return function(){var e=Object(C.a)(x.a.mark((function e(c){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.emit("message",{chatroomId:t,message:a,userId:n,author:r});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},leaveChatroom:function(e,t){return function(){var a=Object(C.a)(x.a.mark((function a(n){return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:A.emit("leave",{room:e,username:t},(function(e){}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.auth,a=e.chatrooms,c=e.fetchMessages,s=e.joinChatroom,o=e.sendMessage,l=e.leaveChatroom,m=Object(n.useState)(""),u=Object(w.a)(m,2),i=u[0],d=u[1],h=Object(n.useState)(t.currentChatroom),p=Object(w.a)(h,2),f=p[0],b=p[1];if(Object(n.useEffect)((function(){Object.keys(a).forEach((function(e){c(e)}))}),[]),Object(n.useEffect)((function(){l(f,t.user.username),s(t.currentChatroom,t.user.username),b(t.currentChatroom)}),[t.currentChatroom,t.user.username]),!a[t.currentChatroom])return r.a.createElement(r.a.Fragment,null);return r.a.createElement("div",{className:"chatroom__display bg-secondary"},r.a.createElement("div",{className:"chatroom__container"},r.a.createElement("div",{className:"chatroom__heading"},r.a.createElement("h2",{className:"chatroom__title"},a[t.currentChatroom].name)),r.a.createElement(re,{messages:a[t.currentChatroom].messages}),r.a.createElement("div",{className:"chatroom__input mb-2 mx-auto"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o({message:i,chatroomId:t.currentChatroom,userId:t._id,author:t.user.username}),d("")},className:"w-100"},r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{className:"form-control w-100",placeholder:"Message...",type:"text",value:i,onChange:function(e){d(e.target.value)}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-md btn-outline-secondary "},"Send")))))))})),se=Object(o.b)((function(e){return{auth:e.auth,chatrooms:e.chatrooms}}),{})((function(e){var t=0!==e.chatrooms.length?r.a.createElement(ce,null):r.a.createElement("div",null,"Click on a chat room to enter");return r.a.createElement(r.a.Fragment,null,t)})),oe=(a(295),a(296),Object(o.b)((function(e){return{auth:e.auth}}),{checkAuth:function(){return function(){var e=Object(C.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("jwt-token"),console.log(a),a){e.next=4;break}return e.abrupt("return",t({type:"CHECK_AUTH",payload:{isLoggedIn:!1,token:null}}));case 4:return e.next=6,S.get("/users/fetch",{headers:{Authorization:"Bearer ".concat(a)}});case 6:n=e.sent,t({type:"CHECK_AUTH",payload:{token:a,_id:n.data._id,isLoggedIn:!0,user:n.data.user}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fetchChatrooms:function(){return function(){var e=Object(C.a)(x.a.mark((function e(t,a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.get("/chatrooms/fetch");case 3:n=e.sent,r=n.data.chatrooms.map((function(e){var t=0!==a().chatrooms.length?a().chatrooms[e._id].messages:[];return Object(i.a)(Object(i.a)({},e),{},{messages:Object(h.a)(t)})})),t({type:"FETCH_CHATROOMS",payload:Object(i.a)({},r)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()}})((function(e){var t=e.auth,a=e.checkAuth,c=e.fetchChatrooms;return Object(n.useEffect)((function(){return a()}),[]),Object(n.useEffect)((function(){a(),t.isLoggedIn&&c()}),[t.isLoggedIn,a,c]),r.a.createElement("div",{className:"wrapper d-flex align-items-stretch"},r.a.createElement(y.c,{history:O},r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,{auth:t.isLoggedIn}),r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/",exact:!0},t.isLoggedIn?r.a.createElement(y.a,{to:"/chats"}):r.a.createElement(ne,null)),r.a.createElement(y.b,{path:"/chats"},t.isLoggedIn?r.a.createElement(se,null):r.a.createElement(y.a,{to:"/"}))))))})));console.log("ENV:","production"),s.a.render(r.a.createElement(o.a,{store:g},r.a.createElement(oe,null)),document.querySelector("#root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.2841bdde.chunk.js.map
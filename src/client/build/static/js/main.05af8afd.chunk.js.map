{"version":3,"sources":["redux/reducers/authReducer.js","redux/reducers/chatReducer.js","redux/reducers/index.js","redux/types.js","store.js","history.js","api/index.js","socket/index.js","redux/actions/chat/index.js","redux/actions/auth/index.js","components/userForms/RenderForm.jsx","components/userForms/LoginForm.jsx","components/userForms/SignupForm.jsx","pages/Home.jsx","components/chats/ChatDisplay.jsx","pages/Chat.jsx","icons/icons.jsx","components/sidebar/IconButton.jsx","components/sidebar/Sidebar.jsx","components/userForms/NewChatForm.jsx","components/ConfirmationModal.jsx","components/sidebar/SidebarProfile.jsx","components/sidebar/SidebarChats.jsx","ProtectedRoute.jsx","App.js","index.js"],"names":["INITIAL_STATE","isLoggedIn","_id","token","data","combineReducers","auth","state","action","type","payload","chatRooms","_","mapKeys","omit","chatRoomId","messages","message","form","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","createBrowserHistory","axios","create","baseURL","headers","socket","io","displayChatRooms","dispatch","getState","a","api","get","chats","map","chat","length","console","log","on","returnMsg","checkAuth","localStorage","getItem","response","reduxForm","props","onSubmit","handleSubmit","formValues","initialValues","handleForm","Object","keys","some","value","reset","updateValues","forEach","className","children","LoginForm","renderInput","input","label","placeholder","required","Field","name","component","SignupForm","connect","signup","defaultChatRoom","post","error","code","alert","keyValue","username","user","history","push","login","setItem","useState","activeForm","setActiveForm","handleSignup","handleLogin","updateCurrentForm","onClick","classNames","disabled","messageList","useRef","useEffect","newMessage","current","lastElementChild","newMessageStyles","getComputedStyle","newMessageMargin","parseInt","marginBottom","newMessageHeight","offsetHeight","visibleHeight","scrollHeight","scrollTop","ref","messageKey","createdAt","timestamp","moment","format","author","key","Math","random","userId","sendMessage","emit","joinChatRoom","userName","room","info","leaveChatRoom","fetchMessages","computedMatch","params","id","setMessage","setChatRoomId","systemMessage","chatRoom","e","preventDefault","onChange","target","profileIcon","width","height","viewBox","fill","xmlns","fillRule","d","chatsIcon","plusIcon","pencilIcon","IconButton","icon","activeIcon","Sidebar","setActiveIcon","icons","currentTarget","setCurrentIcon","NewChatForm","errorStyle","newRoomName","ConfirmationModal","modalConfig","setModalDisplay","modalDisplay","handleDelete","Modal","show","onHide","ModalHeader","closeButton","ModalTitle","title","ModalBody","ModalFooter","btnStyle","btnText","logout","removeItem","updateUser","patch","deleteUser","userDeleted","editing","setEditing","meta","touched","renderError","profileDisplay","src","avatar","alt","pick","tabIndex","style","createChatRoom","createdBy","closeChat","setNewRoomName","numChats","renderChatData","to","pathname","handleClose","chatDisplay","ProtectedRoute","Component","path","exact","render","Home","Chat","process","ReactDOM","document","querySelector"],"mappings":"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","file":"static/js/main.05af8afd.chunk.js","sourcesContent":["import {\r\n  CHECK_AUTH,\r\n  LOG_IN,\r\n  LOG_OUT,\r\n  UPDATE_USER\r\n} from '../types'\r\n\r\n// Do not modify\r\nconst INITIAL_STATE = {\r\n  isLoggedIn: false,\r\n  _id: null,\r\n  token: null,\r\n  data: {}\r\n}\r\n\r\nexport default (state=INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case CHECK_AUTH:\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      };\r\n    case LOG_IN:\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      };\r\n    case LOG_OUT:\r\n      return {\r\n        ...state,\r\n        ...INITIAL_STATE\r\n      };\r\n    case UPDATE_USER:\r\n      return {\r\n        ...state,\r\n        data: {\r\n          ...state.data,\r\n          ...action.payload\r\n        }\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}","import _ from 'lodash'\r\nimport {\r\n  ADD_CHATROOM,\r\n  DISPLAY_CHATROOMS,\r\n  NEW_MESSAGE,\r\n  LOAD_MESSAGES,\r\n  CLOSE_CHAT, LOG_OUT\r\n} from '../types';\r\n\r\nconst INITIAL_STATE = [];\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch(action.type) {\r\n    case ADD_CHATROOM:\r\n      return {\r\n        ...state,\r\n        [action.payload._id]: {\r\n          ...action.payload\r\n        }\r\n      }\r\n    case DISPLAY_CHATROOMS:\r\n      return {\r\n        ...state,\r\n        ..._.mapKeys(action.payload, '_id')\r\n      }\r\n    case CLOSE_CHAT:\r\n      return {\r\n        ...state,\r\n        ..._.omit(state, action.payload)\r\n      }\r\n    case NEW_MESSAGE:\r\n      return {\r\n        ...state,\r\n        [action.payload.chatRoomId]: {\r\n          ...state[action.payload.chatRoomId],\r\n          messages: [\r\n            ...state[action.payload.chatRoomId].messages,\r\n            action.payload.message\r\n          ]\r\n        }\r\n      }\r\n    case LOAD_MESSAGES:\r\n      return {\r\n        ...state,\r\n        [action.payload.chatRoomId]: {\r\n          ...state[action.payload.chatRoomId],\r\n          messages: [\r\n            ...state[action.payload.chatRoomId].messages,\r\n            ...action.payload.messages\r\n          ]\r\n        }\r\n      }\r\n    case LOG_OUT:\r\n      return {\r\n        ...state,\r\n        ...INITIAL_STATE\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}","import { combineReducers } from \"redux\";\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport authReducer from './authReducer';\r\nimport chatReducer from './chatReducer';\r\n\r\nexport default combineReducers({\r\n  auth: authReducer,\r\n  chatRooms: chatReducer,\r\n  form: formReducer\r\n});","// Chat Action Types\r\nexport const ADD_CHATROOM = 'ADD_CHATROOM';\r\nexport const DISPLAY_CHATROOMS = 'DISPLAY_CHATROOMS';\r\nexport const NEW_MESSAGE = 'NEW_MESSAGE';\r\nexport const LOAD_MESSAGES = 'LOAD_MESSAGES';\r\nexport const CLOSE_CHAT = 'CLOSE_CHAT';\r\n\r\n// Authorization Action Types\r\nexport const CHECK_AUTH = 'CHECK_AUTH';\r\nexport const LOG_IN = 'LOG_IN';\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const UPDATE_USER = 'UPDATE_USER';","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport reduxThunk from 'redux-thunk';\r\nimport reducers from './redux/reducers';\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(\r\n  reducers,\r\n  composeEnhancers(applyMiddleware(reduxThunk))\r\n);","import { createBrowserHistory } from 'history';\r\nexport default createBrowserHistory();","import axios from 'axios';\r\nexport default axios.create({\r\n  baseURL: 'https://young-oasis-67409.herokuapp.com',\r\n  // baseURL: 'http://localhost:5500',\r\n  headers: {'Content-Security-Policy': \"default-src *\"}\r\n})\r\n","import io from 'socket.io-client';\r\n\r\nconst socket = io()\r\n// const socket = io('http://localhost:5500');\r\nexport { socket };\r\n","import api from '../../../api'\r\nimport { store } from '../../../store';\r\nimport history from \"../../../history\";\r\nimport { socket } from \"../../../socket\";\r\nimport {\r\n  DISPLAY_CHATROOMS,\r\n  NEW_MESSAGE,\r\n  LOAD_MESSAGES,\r\n  CLOSE_CHAT,\r\n  ADD_CHATROOM\r\n} from '../../types'\r\n\r\n/* ----   ADD_CHATROOM ACTION CREATOR    ---- */\r\nexport const createChatRoom = (name, userId) => async dispatch => {\r\n  try {\r\n    const { data } = await api.post(\r\n      '/create-chatRoom',\r\n      { name, createdBy: userId }\r\n    )\r\n    dispatch({\r\n      type: ADD_CHATROOM,\r\n      payload: {...data.chat, messages: []}\r\n    })\r\n    history.push(`/chats/${data.chat._id}`)\r\n  } catch (e) {\r\n    dispatch({\r\n      type: 'ERROR',\r\n      error: 'Invalid Name'\r\n    })\r\n  }\r\n}\r\n/* ----   ****    ---- */\r\n\r\n/* ----   DISPLAY_CHATROOMS ACTION CREATOR    ---- */\r\nexport const displayChatRooms = () => async (dispatch, getState) => {\r\n  try {\r\n    const { data } = await api.get('/chats');\r\n    const chatRooms = data.chats.map(chat => {\r\n      const messages = getState().chatRooms.length !== 0 ? getState().chatRooms[chat._id].messages : [];\r\n      return { ...chat, messages: [...messages]}\r\n    })\r\n    console.log('chatRooms', chatRooms)\r\n    dispatch({\r\n      type: DISPLAY_CHATROOMS,\r\n      payload: {...chatRooms}\r\n    })\r\n  } catch(e) {\r\n    console.log(e)\r\n  }\r\n}\r\n/* ----   ****    ---- */\r\n\r\n/* ----   JOIN_CHATROOM ACTION CREATOR    ---- */\r\nexport const joinChatRoom = (chatRoomId, userName) => async dispatch => {\r\n  socket.emit('join', { room: chatRoomId, userName:userName }, (room) => {\r\n    console.info(`connected to ${room}`)\r\n  })\r\n}\r\n/* ----   ****    ---- */\r\n\r\n/* ----   LEAVE_CHATROOM ACTION CREATOR    ---- */\r\nexport const leaveChatRoom = (chatRoomId, userName) => async dispatch  => {\r\n  socket.emit('leave', { room: chatRoomId, userName: userName }, room => {\r\n    console.log(`leaving ${room}`)\r\n  })\r\n}\r\n/* ----   ****    ---- */\r\n\r\n/* ----   CLOSE_CHATROOM ACTION CREATOR    ---- */\r\nexport const closeChat = (chatRoomId) => async dispatch => {\r\n  socket.emit('leave', { room: chatRoomId })\r\n  dispatch({\r\n    type: CLOSE_CHAT,\r\n    payload: chatRoomId\r\n  })\r\n}\r\n/* ----   ****    ---- */\r\n\r\n/* ----   FETCH_MESSAGES ACTION CREATOR    ---- */\r\nexport const fetchMessages = (chatRoomId) => async dispatch => {\r\n  const { data } = await api.get(`/messages?chatRoomId=${chatRoomId}`);\r\n  dispatch({ type: LOAD_MESSAGES, payload: {chatRoomId, messages: data.messages }})\r\n}\r\n/* ----   ****    ---- */\r\n\r\n/* ----   NEW_MESSAGE ACTION CREATOR    ---- */\r\nexport const sendMessage = ({ chatRoomId, message, userId, author }) => async dispatch => {\r\n  console.log('send message ran')\r\n  console.log(chatRoomId)\r\n  socket.emit('message', { chatRoomId, message, userId, author })\r\n}\r\n\r\nconst dispatchMessage = (messageType, message) => {\r\n  return { type: messageType, payload: {chatRoomId: message.chatRoomId, message: message} }\r\n}\r\n\r\nsocket.on('return-message', returnMsg => {\r\n  store.dispatch(dispatchMessage(NEW_MESSAGE, returnMsg))\r\n})\r\n/* ----   ****    ---- */\r\n\r\n\r\n// socket.on(\r\n//   'system-welcome',\r\n//   ({userName, chatRoomId, type} ) => {\r\n//     console.log('welcome ran')\r\n//     return socket.emit('message', {\r\n//       chatRoomId,\r\n//       message: `${type} ${userName}.`,\r\n//       userId: null,\r\n//       author: 'systemManager'\r\n//     })\r\n//   }\r\n// )\r\n//\r\n// socket.on(\r\n//   'system-join',\r\n//   ({ userName, type, chatRoomId }) => {\r\n//     console.log('join ran')\r\n//     socket.emit('message', {\r\n//       chatRoomId,\r\n//       message: `${userName} has ${type}.`,\r\n//       userId: null,\r\n//       author: 'systemManager'\r\n//     })\r\n//   }\r\n// )\r\n//\r\n// socket.on('system-leave',\r\n//   ({ userName, type, chatRoomId }) => {\r\n//   console.log('leave ran')\r\n//     socket.emit('message', {\r\n//       chatRoomId,\r\n//       message: `${userName} has ${type}.`,\r\n//       userId: null,\r\n//       author: 'systemManager'\r\n//     })\r\n//   }\r\n// )\r\n","import api from \"../../../api\";\r\nimport history from \"../../../history\";\r\nimport { displayChatRooms } from \"../chat\";\r\nimport {\r\n  CHECK_AUTH,\r\n  LOG_IN,\r\n  LOG_OUT,\r\n  UPDATE_USER\r\n} from '../../types';\r\n\r\n/* ----   CHECK_AUTH ACTION CREATOR    ---- */\r\nexport const checkAuth = () => async dispatch => {\r\n  const token = localStorage.getItem('jwt-token');\r\n  if (!token) {\r\n    return dispatch({\r\n      type: 'CHECK_AUTH',\r\n      payload: {\r\n        isLoggedIn: false,\r\n        token: null\r\n      }\r\n    })\r\n  }\r\n\r\n  const response = await api.get(\r\n    '/user-id',\r\n    {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    }\r\n  )\r\n  dispatch({\r\n   type: CHECK_AUTH,\r\n   payload: {\r\n     _id: response.data._id,\r\n     token,\r\n     isLoggedIn: true,\r\n     data: response.data\r\n   }\r\n  })\r\n\r\n  displayChatRooms();\r\n}\r\n/* ----   ****    ---- */\r\n\r\n/* ----   LOG_IN ACTION CREATOR    ---- */\r\nexport const login = formValues => async dispatch => {\r\n  const defaultChatRoom = '5f52268b6d59e14df8174254';\r\n  const response = await api.post(\r\n    '/login-user',\r\n    { ...formValues }\r\n  )\r\n\r\n  if (response.data.error) {\r\n    const error = response.data.error;\r\n    alert(`${error.message}`)\r\n    return;\r\n  }\r\n\r\n  localStorage.setItem('jwt-token', response.data.token);\r\n\r\n  dispatch({\r\n   type: LOG_IN,\r\n   payload: {\r\n     _id: response.data.user._id,\r\n     token: response.data.token,\r\n     isLoggedIn: true,\r\n     data: response.data.user\r\n   }\r\n })\r\n\r\n  history.push(`/chats/${defaultChatRoom}`);\r\n}\r\n/* ----   ****    ---- */\r\n\r\n/* ----   LOG_OUT ACTION CREATOR    ---- */\r\nexport const logout = () => async (dispatch, getState) => {\r\n  const { token } = getState().auth\r\n\r\n  await api.post(\r\n    '/logout',\r\n    {},\r\n    {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    }\r\n  )\r\n  await localStorage.removeItem('jwt-token');\r\n\r\n  dispatch({\r\n   type: LOG_OUT,\r\n  })\r\n\r\n  history.push('/')\r\n  }\r\n/* ----   ****    ---- */\r\n\r\n/* ----   SIGN_UP ACTION CREATOR    ---- */\r\nexport const signup = (formValues) => async (dispatch) => {\r\n  const defaultChatRoom = '5f52268b6d59e14df8174254';\r\n  const response = await api.post('/create-user', { ...formValues })\r\n  console.log(response)\r\n  if (response.data.error) {\r\n    const error = response.data.error;\r\n    if (error.code === 11000) {\r\n      alert(`The username \"${error.keyValue.username}\" has already been taken.`)\r\n    }\r\n    return\r\n  }\r\n\r\n  dispatch({\r\n             type: CHECK_AUTH,\r\n             payload: {\r\n               _id: response.data.user._id,\r\n               token: response.data.token,\r\n               isLoggedIn: true,\r\n               data: response.data.user\r\n             }\r\n           })\r\n\r\n  history.push(`/chats/${defaultChatRoom}`)\r\n}\r\n/* ----   ****    ---- */\r\n\r\n/* ----   UPDATE_USER ACTION CREATOR    ---- */\r\nexport const updateUser = formValues => async (dispatch, getState) => {\r\n  const {token} = getState().auth;\r\n  const response = await api.patch(\r\n    './user-update',\r\n    {...formValues},\r\n    {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    }\r\n  );\r\n\r\n  if (response.data.error) {\r\n    const error = response.data.error;\r\n    if (error.code === 11000) {\r\n      alert(`The username \"${error.keyValue.username}\" has already been taken.`)\r\n    }\r\n    return\r\n  }\r\n\r\n  dispatch({\r\n    type: UPDATE_USER,\r\n    payload: response.data.user\r\n  })\r\n}\r\n\r\n/* ----   ****    ---- */\r\n\r\n/* ----   DELETE_USER ACTION CREATOR    ---- */\r\nexport const deleteUser = () => async (dispatch, getState) => {\r\n  const {token} = getState().auth;\r\n  const response = await api.post(\r\n    '/user-delete',\r\n    {},\r\n    {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    }\r\n  )\r\n\r\n\r\n  if (response.data.userDeleted) {\r\n    await localStorage.removeItem('jwt-token');\r\n    dispatch({\r\n     type: LOG_OUT,\r\n    })\r\n    history.push('/')\r\n  }\r\n}\r\n\r\n/* ----   ****    ---- */\r\n","import React from 'react';\r\nimport { reduxForm } from \"redux-form\";\r\n\r\nconst RenderForm = (props) => {\r\n  const handleForm = formValues => {\r\n    const {initialValues} = props;\r\n\r\n    if (!initialValues) {\r\n      return props.handleForm(formValues);\r\n    }\r\n\r\n    const valuesToValidate = Object.keys(formValues)\r\n    if (valuesToValidate.some(value => formValues[value] === '')) {\r\n      props.reset();\r\n    }\r\n\r\n    let updateValues = {};\r\n    Object.keys(initialValues).forEach((value) => {\r\n       if (initialValues[value] !== formValues[value]) {\r\n         updateValues = { ...updateValues,  [value]: formValues[value] }\r\n       }\r\n    })\r\n    props.handleForm(updateValues);\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={props.handleSubmit(handleForm)} className='form-signin mt-2'>\r\n      {props.children}\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default reduxForm({ form: 'userForm' })(RenderForm);","import React from 'react';\r\nimport { Field } from \"redux-form\";\r\nimport RenderForm from \"./RenderForm\";\r\n\r\nconst LoginForm = (props) => {\r\n\r\n  const renderInput = ({ input, label, type }) => {\r\n    return (\r\n      <div>\r\n        <label className='text-white text-left my-2' >{label}</label>\r\n        <input className='form-control' placeholder={label} {...input} type={type} required />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const handleForm = formValues => {\r\n    props.handleForm(formValues);\r\n  }\r\n\r\n  return(\r\n    <RenderForm handleForm={handleForm}>\r\n      <div className='ui stacked element'>\r\n        <Field name='username' component={renderInput} label='Username' type='text' />\r\n        <Field name='password' component={renderInput} label='Password' type='password' />\r\n        <button className='btn btn-md btn-secondary btn-block my-4 mx-auto w-25'>Submit</button>\r\n      </div>\r\n      <div className='d-flex w-100 justify-content-center text-white'>\r\n        <div className='col'>\r\n          <p className='m-0 p-0'>Sample User Credentials</p>\r\n          <p className='m-0 p-0'>Username: sampleuser</p>\r\n          <p className='m-0 p-0'>Password: examplepass000</p>\r\n        </div>\r\n      </div>\r\n    </RenderForm>\r\n  )\r\n}\r\n\r\nexport default LoginForm;","import React from 'react';\r\nimport { Field, } from \"redux-form\";\r\nimport RenderForm from \"./RenderForm\";\r\n\r\nconst SignupForm = (props) => {\r\n\r\n  const renderInput = ({ input, label, type }) => {\r\n    return (\r\n      <div>\r\n        <label className='text-white text-left my-2' >{label}</label>\r\n        <input className='form-control' type={type} placeholder={label} {...input} required />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const handleForm = formValues => {\r\n    props.handleForm(formValues);\r\n  }\r\n\r\n  return(\r\n    <RenderForm handleForm={handleForm}>\r\n      <Field name='name' component={renderInput} label='Name' type='text' />\r\n      <Field name='username' component={renderInput} label='Username' type='text' />\r\n      <Field name='email' component={renderInput} label='Email' type='email' />\r\n      <Field name='password' component={renderInput} label='Password' type='password' />\r\n      <Field name='passwordConf' component={renderInput} label='Confirm Password' type='password' />\r\n      <button className='btn btn-md btn-secondary btn-block mt-4 mx-auto w-50'>Submit</button>\r\n    </RenderForm>\r\n  )\r\n}\r\n\r\nexport default SignupForm;\r\n","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\nimport { login, signup } from \"../redux/actions/auth\";\r\nimport { SignupForm, LoginForm } from \"../components\";\r\n\r\nconst Home = (props) => {\r\n  const [activeForm, setActiveForm] = useState('signup');\r\n\r\n  const handleSignup = (formValues) => {\r\n    props.signup(formValues)\r\n  }\r\n\r\n  const handleLogin = (formValues) => {\r\n    props.login(formValues)\r\n  }\r\n\r\n  const updateCurrentForm = () => {\r\n    if (activeForm === 'signup') {\r\n      setActiveForm('login')\r\n    }\r\n    if (activeForm === 'login') {\r\n      setActiveForm('signup')\r\n    }\r\n  }\r\n\r\n  const renderForm = () => {\r\n    return activeForm === 'signup' ?\r\n      <SignupForm\r\n        handleForm={handleSignup}\r\n      />\r\n      :\r\n      <LoginForm\r\n        handleForm={handleLogin}\r\n      />;\r\n  }\r\n\r\n  return (\r\n    <div className='landing__area col'>\r\n      <div className='landing__container container pb-3 px-3 bg-dark'>\r\n        <div className='row mb-2'>\r\n          <div className='col p-0'>\r\n              <button\r\n                onClick={() => updateCurrentForm()}\r\n                className={classNames({\r\n                  'btn btn-large text-white w-100 p-3': true,\r\n                  'btn-outline-dark': activeForm === 'signup',\r\n                  'btn-secondary': activeForm === 'login'\r\n                })}\r\n                disabled={activeForm === 'signup'}\r\n              >\r\n                Sign Up Here!\r\n              </button>\r\n            </div>\r\n\r\n          <div className='col h-100 p-0'>\r\n            <button\r\n              onClick={() => updateCurrentForm()}\r\n              className={classNames({\r\n                'btn btn-large text-white w-100 p-3': true,\r\n                'btn-outline-dark disabled': activeForm === 'login',\r\n                'btn-secondary': activeForm === 'signup'\r\n              })}\r\n              disabled={activeForm === 'login'}\r\n            >\r\n              Log In Here!\r\n            </button>\r\n          </div>\r\n        </div>\r\n          {renderForm()}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(null, { signup, login })(Home);\r\n\r\n","import React, { useRef, useEffect } from 'react';\r\nimport moment from 'moment';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nconst ChatDisplay = ({ messages, auth }) => {\r\n  const messageList = useRef(null);\r\n\r\n  const autoscroll = () => {\r\n    // new message element\r\n    const newMessage = messageList.current.lastElementChild;\r\n\r\n    if (!newMessage) {return};\r\n\r\n    // get the height of the newMessage\r\n    const newMessageStyles = getComputedStyle(newMessage.lastElementChild);\r\n    const newMessageMargin = parseInt(newMessageStyles.marginBottom);\r\n    const newMessageHeight = messageList.current.offsetHeight + newMessageMargin;\r\n\r\n    // get the visible height\r\n    const visibleHeight = messageList.current.offsetHeight;\r\n\r\n    // get the message container height\r\n    const contentHeight = messageList.current.scrollHeight;\r\n\r\n    // Current scroll location\r\n    const scrollOffset = messageList.current.scrollTop + visibleHeight;\r\n\r\n    if (contentHeight - newMessageHeight <= scrollOffset) {\r\n      // this will set the scroll top position to the maximum scroll top value being the bottom of the page\r\n      messageList.current.scrollTop = messageList.current.scrollHeight;\r\n    }\r\n  };\r\n\r\n  useEffect(autoscroll, [messages.length])\r\n\r\n\r\n  const formatTimestamp = (createdAt) => {\r\n    return moment(createdAt).format('h:mm A');\r\n  }\r\n\r\n  const renderMessages = () => {\r\n    const messageKeysArray = Object.keys(messages) ;\r\n\r\n    return messageKeysArray.map(messageKey => {\r\n      const timestamp = formatTimestamp(messages[messageKey].createdAt)\r\n      if (messages[messageKey].author === 'systemManager') {\r\n        return (\r\n          <li key={Math.random()*1000} className='chat__message chat__message-system'>\r\n            <div key={messageKey} className='text-white text-left'>{messages[messageKey].message}</div>\r\n          </li>\r\n        )\r\n      }\r\n\r\n      if (messages[messageKey].userId !== auth._id) {\r\n        return (\r\n          <li key={messageKey} className='chat__messages chat__messages-rec'>\r\n            <div className=\"chat__bubble chat__bubble-rec\">\r\n              <div className={`chat__content px-2 py-1`}>\r\n                <div className={`chat__area py-0 mr-1`}>\r\n                  <p className='chat__text chat__text-author' >\r\n                    {messages[messageKey].author}\r\n                  </p>\r\n                  <p className='chat__text chat__text-message'>{messages[messageKey].message}</p>\r\n                </div>\r\n                <div className={`chat__footer ml-1`}>\r\n                  <div className='chat__timestamp'>\r\n                    {timestamp}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        )\r\n      }\r\n\r\n      return (\r\n        <li key={messageKey} className='chat__messages chat__messages-sent'>\r\n          <div className=\"chat__bubble chat__bubble-sent\">\r\n            <div className={`chat__content px-2 py-1`}>\r\n              <div className={`chat__area py-0 mr-1`}>\r\n                <p className='chat__text chat__text-message'>{messages[messageKey].message}</p>\r\n              </div>\r\n              <div className={`chat__footer ml-1 text-white`}>\r\n                <div className='chat__timestamp'>\r\n                  {timestamp}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n      <div className='chat__container'>\r\n        <ul className='chat__display chat__display-scroll ' ref={messageList}>\r\n          {messages ? renderMessages() : <div className='text-white'>Send a message!!</div>}\r\n        </ul>\r\n      </div>\r\n\r\n  )\r\n}\r\n\r\n const mapStateToProps = state => {\r\n  return {\r\n     auth: state.auth\r\n   }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ChatDisplay);\r\n","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { sendMessage, joinChatRoom, leaveChatRoom, fetchMessages, displayChatRooms } from '../redux/actions/chat';\r\nimport { checkAuth } from '../redux/actions/auth';\r\nimport { ChatDisplay } from \"../components/chats\";\r\n\r\nconst Chat = ({ chatRooms, auth, computedMatch, sendMessage, joinChatRoom, leaveChatRoom, fetchMessages }) => {\r\n  console.log(computedMatch.params.id)\r\n  const [ message, setMessage ] = useState('');\r\n  const [ chatRoomId, setChatRoomId] = useState(computedMatch.params.id)\r\n  const [ systemMessage, setSystemMessage ] = useState({});\r\n\r\n  // Initial message fetch for all open chat rooms\r\n  useEffect(() => {\r\n    Object.keys(chatRooms).forEach((chatRoom) => {\r\n      fetchMessages(chatRoom)\r\n    })\r\n  }, [])\r\n\r\n  // Update the current chatRoom\r\n  useEffect(() => {\r\n    leaveChatRoom(chatRoomId, auth.data.name);\r\n    joinChatRoom(computedMatch.params.id, auth.data.name)\r\n    setChatRoomId(computedMatch.params.id)\r\n  }, [computedMatch.params.id, auth.data.name, chatRoomId, leaveChatRoom, joinChatRoom])\r\n\r\n  const onChange = e => {\r\n    setMessage(e.target.value)\r\n  }\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    sendMessage({\r\n      chatRoomId,\r\n      message,\r\n      userId: auth._id,\r\n      author: auth.data.username\r\n    })\r\n    setMessage('')\r\n  }\r\n  return (\r\n    <div className='chatroom__display bg-secondary'>\r\n      <div className='chatroom__container'>\r\n        <div className='chatroom__heading'>\r\n          <h2 className='chatroom__title'>{chatRooms[chatRoomId].name}</h2>\r\n        </div>\r\n        <ChatDisplay messages={chatRooms[chatRoomId].messages} systemMessage={systemMessage} />\r\n        <div className='chatroom__input mb-2 mx-auto'>\r\n          <form className='w-100' onSubmit={onSubmit}>\r\n            <div className='row '>\r\n              <div className='col-10'>\r\n                <input\r\n                  className='form-control w-100'\r\n                  placeholder='Message...'\r\n                  type='text'\r\n                  value={message}\r\n                  onChange={onChange}\r\n                />\r\n              </div>\r\n              <div className='col-2'>\r\n                <button className='btn btn-md btn-outline-secondary '>\r\n                  Send\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    auth: state.auth,\r\n    defaultChatRoom: state.chatRooms.defaultChatRoom,\r\n    chatRooms: state.chatRooms,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { sendMessage, checkAuth, joinChatRoom, leaveChatRoom, fetchMessages, displayChatRooms })(Chat);\r\n","import React from \"react\";\r\n\r\nexport const profileIcon = (\r\n  <svg width=\"1.2em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-person\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path fillRule=\"evenodd\" d=\"M10 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6 5c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z\"/>\r\n  </svg>\r\n)\r\n\r\nexport const chatsIcon = (\r\n  <svg width=\"1.2em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-chat-right-text\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path fillRule=\"evenodd\" d=\"M2 1h12a1 1 0 0 1 1 1v11.586l-2-2A2 2 0 0 0 11.586 11H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z\"/>\r\n    <path fillRule=\"evenodd\" d=\"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z\"/>\r\n  </svg>\r\n)\r\n\r\nexport const avatarIcon = (\r\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-person-fill\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path fillRule=\"evenodd\" d=\"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/>\r\n  </svg>\r\n)\r\n\r\nexport const plusIcon = (\r\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-plus-square\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path fillRule=\"evenodd\" d=\"M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\r\n    <path fillRule=\"evenodd\" d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\r\n  </svg>\r\n)\r\n\r\nexport const pencilIcon = (\r\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-pencil\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path fillRule=\"evenodd\" d=\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z\"/>\r\n  </svg>\r\n)","import React from 'react';\r\nimport classNames from \"classnames\";\r\nimport { profileIcon, chatsIcon } from \"../../icons/icons\";\r\n\r\nconst IconButton = (props) => {\r\n  const renderIcon = () => {\r\n    if (props.icon === 'profile') {\r\n      return profileIcon;\r\n    }\r\n    if (props.icon === 'chats') {\r\n      return chatsIcon;\r\n    }\r\n  }\r\n  return (\r\n    <button\r\n      className={classNames( 'icon__button',\r\n        'btn btn-outline-dark p-0',\r\n        {\r\n          'text-white': props.icon === props.activeIcon,\r\n          'text-secondary': props.icon !== props.activeIcon\r\n        }\r\n      )}\r\n      disabled={props.icon === props.activeIcon}\r\n    >\r\n      {renderIcon()}\r\n    </button>\r\n  )\r\n}\r\n\r\nexport default IconButton;","import React, { useState } from 'react';\r\nimport { SidebarProfile, SidebarChats } from \"../sidebar\";\r\nimport IconButton from './IconButton';\r\n\r\n\r\nconst Sidebar = () => {\r\n  const [ activeIcon, setActiveIcon ] = useState('chats')\r\n\r\n  const icons = ['profile', 'chats']\r\n\r\n  const setCurrentIcon = (e) => {\r\n    if (e.currentTarget.id === 'profile-cta') {\r\n      setActiveIcon('profile');\r\n    }\r\n    if (e.currentTarget.id === 'chats-cta') {\r\n      setActiveIcon('chats');\r\n    }\r\n  }\r\n\r\n  const renderIcons = () => {\r\n    return icons.map(icon => {\r\n      return (\r\n        <li\r\n          id={`${icon}-cta`}\r\n          key={icon}\r\n          className='nav-item'\r\n          onClick={(e) => setCurrentIcon(e)}\r\n        >\r\n          <IconButton icon={icon} activeIcon={activeIcon} />\r\n        </li>\r\n      )\r\n    })\r\n  }\r\n\r\n  const renderSidebarContent = () => {\r\n    if (activeIcon === 'profile') {\r\n      return <SidebarProfile />\r\n    }\r\n    if (activeIcon === 'chats') {\r\n      return <SidebarChats />\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='sidebar__content'>\r\n      <nav className='sidebar__nav'>\r\n        <div className='sidebar__row py-4'>\r\n          <h2 className='text-white'>WhatsChat</h2>\r\n        </div>\r\n        <div className='sidebar__row'>\r\n          <div className='sidebar__break'></div>\r\n        </div>\r\n        <div className='sidebar__row'>\r\n          <ul className='sidebar__list list-unstyled components py-3 mb-0'>\r\n            {renderIcons()}\r\n          </ul>\r\n        </div>\r\n        <div className='sidebar__row'>\r\n          <div className='sidebar__break'></div>\r\n        </div>\r\n        <div className='sidebar__row'>\r\n          {renderSidebarContent()}\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Sidebar;\r\n","import React from 'react';\r\nimport { plusIcon } from \"../../icons/icons\";\r\n\r\nexport const NewChatForm = (props) => {\r\n\r\n  const onChange = e => {\r\n    props.onChange(e)\r\n  }\r\n\r\n  const handleForm = e => {\r\n    props.handleForm(e)\r\n  }\r\n\r\n  const errorStyle = props.newRoomName.length < 5 && props.newRoomName.length !== 0 ? 'is-invalid' : null\r\n\r\n  return (\r\n    <form className='w-100' onSubmit={handleForm}>\r\n      <div\r\n        className='chatroom__form'\r\n      >\r\n        <div className='d-flex justify-content-end col-3 mx-auto'>\r\n          <button\r\n            type='submit'\r\n            className='chatroom__cta-new btn p-0'\r\n          >\r\n            <div className='chatroom__new-cta text-secondary'>\r\n              {plusIcon}\r\n            </div>\r\n          </button>\r\n        </div>\r\n        <div className='col-9'>\r\n          <input onChange={onChange} className={`form-control ${errorStyle}`} type='text' placeholder={'Create Chat Room....'} name='chatForm' required/>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport Modal  from 'react-bootstrap/Modal';\r\nimport ModalFooter from 'react-bootstrap/ModalFooter';\r\nimport ModalBody from 'react-bootstrap/ModalBody';\r\nimport ModalTitle from 'react-bootstrap/ModalTitle';\r\nimport ModalHeader from 'react-bootstrap/ModalHeader';\r\n\r\n\r\nconst ConfirmationModal = ({modalConfig, setModalDisplay, modalDisplay, handleDelete}) => {\r\n  const handleDeleteClick = () => {\r\n    setModalDisplay(false)\r\n    handleDelete();\r\n  }\r\n\r\n  if (modalDisplay) {\r\n    return (\r\n      <Modal show={modalDisplay} onHide={() => setModalDisplay(false)}>\r\n        <ModalHeader closeButton>\r\n          <ModalTitle>\r\n            {modalConfig.title}\r\n          </ModalTitle>\r\n        </ModalHeader>\r\n        <ModalBody>\r\n          <p>{modalConfig.message}</p>\r\n        </ModalBody>\r\n        <ModalFooter>\r\n          <button onClick={() => setModalDisplay(false)} type='button' className='btn btn-secondary'>\r\n            Cancel\r\n          </button>\r\n          <button onClick={() => handleDeleteClick()} className={`btn btn-${modalConfig.btnStyle}`}>\r\n            {modalConfig.btnText}\r\n          </button>\r\n        </ModalFooter>\r\n      </Modal>\r\n    )\r\n  }\r\n  return <></>\r\n}\r\n\r\nexport default ConfirmationModal;","import React, { useState } from 'react';\r\nimport moment from 'moment';\r\nimport _ from 'lodash';\r\nimport { connect } from 'react-redux';\r\nimport { Field } from 'redux-form';\r\nimport { RenderForm } from '../userForms';\r\nimport ConfirmationModal from '../ConfirmationModal';\r\nimport { logout, updateUser, deleteUser } from \"../../redux/actions/auth\";\r\nimport { pencilIcon } from \"../../icons/icons\";\r\n\r\nconst SidebarProfile = ({ auth, logout, updateUser, deleteUser }) => {\r\n  const [ editing, setEditing ] = useState('')\r\n  const [ modalDisplay, setModalDisplay ] = useState(false);\r\n  const modalConfig = {\r\n    title: 'Delete Account',\r\n    message: 'Are you sure you want to delete your account?',\r\n    btnText: 'Delete',\r\n    btnStyle: 'danger'\r\n  }\r\n\r\n  const handleDelete = () => {\r\n    deleteUser();\r\n  }\r\n\r\n  const handleForm = (formValues) => {\r\n    updateUser(formValues)\r\n    setEditing('')\r\n  }\r\n\r\n  const renderError = ({ error, touched }) => {\r\n    if (touched && error) {\r\n      return (\r\n        <div className='ui error message'>\r\n          <div className='header'>{error}</div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderInput = ({ input, label, meta }) => {\r\n    const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n    return (\r\n      <li className='list-group-item px-3'>\r\n        <div className={`row justify-content-between align-items-center ${className}`}>\r\n          <div className='col-3 text-left p-0'>\r\n            <label className='m-auto font-weight-bold'>\r\n              {label}\r\n            </label>\r\n          </div>\r\n          <div className='col-7'>\r\n            {editing === label ?\r\n              <input className='form-control text-left' {...input} /> :\r\n              <input className='form-control-plaintext text-left' {...input} />}\r\n          </div>\r\n          <div onClick={() => setEditing(label)} className='col-1 text-secondary'>\r\n            {pencilIcon}\r\n          </div>\r\n          {renderError(meta)}\r\n        </div>\r\n      </li>\r\n    )\r\n  }\r\n\r\n  const profileCard = () => {\r\n    return (\r\n      <>\r\n        <div className='card'>\r\n          <div className='card-img-top mx-auto'>\r\n            <img\r\n              className='mx-auto mt-3'\r\n              src={`data:image/png;base64,${auth.data.avatar}`}\r\n              height='150'\r\n              width='150'\r\n              alt='avatar'\r\n            />\r\n\r\n          </div>\r\n          <div className='card-body'>\r\n            <RenderForm handleForm={handleForm} initialValues={_.pick(auth.data, 'name', 'username', 'email', 'password')}>\r\n              <ul className='list-group list-group-flush'>\r\n                <Field name='name' component={renderInput} label='Name' />\r\n                <Field name='username' component={renderInput} label='Username' />\r\n                <Field name='email' component={renderInput} label='Email' />\r\n                <Field name='password' component={renderInput} label='Password' />\r\n                <li className='list-group-item'>\r\n                  <div className='row justify-content-around'>\r\n                    <div className='col text-center'>\r\n                      User Since: {moment(auth.data.createdAt).format(\"MMM 'YY\")}\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n              <input type=\"submit\"\r\n                     className='profile__submit'\r\n                     tabIndex=\"-1\"/>\r\n            </RenderForm>\r\n            <ul className='list-group list-group-flush'>\r\n              <li className='list-group-item'>\r\n                <button onClick={() => logout() } className='btn btn-secondary mt-2'>\r\n                  Log Out\r\n                </button>\r\n              </li>\r\n              <li className='list-group-item '>\r\n                <button onClick={() => setModalDisplay(true)} className='btn btn-danger' disabled={auth.data._id === '5f637fdd0a41ae691c828e50'}>Delete Account</button>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n\r\n\r\n  const profileDisplay = auth.isLoggedIn ? profileCard() : <div className='text-white'>Log in to see your profile</div>\r\n\r\n  return (\r\n    <div className='d-flex flex-column m-3' style={{width: '90%'}}>\r\n      {profileDisplay}\r\n      <ConfirmationModal modalConfig={modalConfig} setModalDisplay={setModalDisplay} modalDisplay={modalDisplay} handleDelete={handleDelete} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, { logout, updateUser, deleteUser })(SidebarProfile);","import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { createChatRoom, displayChatRooms, closeChat } from \"../../redux/actions/chat\";\r\nimport { NewChatForm } from '../userForms';\r\nimport { profileIcon } from \"../../icons/icons\";\r\n\r\nconst SidebarChats = ({ auth, chatRooms, displayChatRooms, createChatRoom, closeChat }) => {\r\n  const [ newRoomName, setNewRoomName ] = useState('');\r\n  const numChats = Object.keys(chatRooms).length\r\n  useEffect(() => {\r\n    if (auth.token){\r\n      displayChatRooms()\r\n    }\r\n  }, [numChats, auth.token, displayChatRooms])\r\n\r\n  const onChange = (e) => {\r\n    setNewRoomName(e.target.value)\r\n  }\r\n\r\n  const handleClose = (key) => {\r\n    closeChat(key)\r\n  }\r\n\r\n  const handleForm = (e) => {\r\n    e.preventDefault()\r\n    if (newRoomName.length >= 5) {\r\n      createChatRoom(newRoomName, auth._id)\r\n      setNewRoomName('')\r\n    }\r\n  }\r\n\r\n  const renderChatData = () => {\r\n    if (chatRooms === {}) {\r\n      return\r\n    }\r\n    return Object.keys(chatRooms).map(key => {\r\n      return (\r\n        <li key={chatRooms[key]._id} className='chatroom__item'>\r\n          <div className='chatroom__icon col-2 my-auto text-secondary'>\r\n            {profileIcon}\r\n          </div>\r\n          <div className='col-8'>\r\n          <Link\r\n            className='chatroom__chatroom'\r\n            to={{\r\n              pathname: `/chats/${key}`\r\n            }}\r\n          >\r\n            <div className='col text-center' >\r\n              {chatRooms[key].name}\r\n            </div>\r\n          </Link>\r\n          </div>\r\n          <div className='chatroom__cta-col'>\r\n            <button onClick={() => handleClose(key)} className='chatroom__cta-close p-0 text-secondary'>\r\n              <p className='chatroom__close'>&#128473;</p>\r\n            </button>\r\n          </div>\r\n        </li>\r\n      )\r\n    })\r\n  }\r\n\r\n  const renderChats = () => {\r\n    return (\r\n      <ul className='chatroom__list list-unstyled'>\r\n        <li className='chatroom__new'>\r\n          <NewChatForm handleForm={handleForm} onChange={onChange} newRoomName={newRoomName} />\r\n        </li>\r\n        {renderChatData()}\r\n      </ul>\r\n    )\r\n  }\r\n\r\n  const chatDisplay = auth.isLoggedIn ? renderChats() : <div className='text-white'>Log in to see your profile</div>\r\n\r\n  return (\r\n    <div className='chatroom__list my-3'>\r\n      {chatDisplay}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    auth: state.auth,\r\n    chatRooms: state.chatRooms\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { createChatRoom, displayChatRooms, closeChat })(SidebarChats);","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, path, ...props }) => {\r\n  return(\r\n    <Route\r\n      exact\r\n      {...props}\r\n      render={() => {\r\n        return props.auth ? <Component {...props} /> : <Redirect to='/' />\r\n      }\r\n    } />\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { Redirect, Router, Route, Switch } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport history from './history';\r\nimport { checkAuth } from \"./redux/actions/auth\";\r\nimport { Home, Chat } from './pages';\r\nimport { Sidebar } from './components/sidebar';\r\nimport ProtectedRoute from './ProtectedRoute'\r\nimport { displayChatRooms } from \"./redux/actions/chat\";\r\nimport './styles/bootstrap.min.css';\r\nimport './styles/styles.css'\r\n\r\nconst App = ({ auth, checkAuth, displayChatRooms }) => {\r\n\r\n  console.log(history)\r\n  const defaultChatRoom = '5f52268b6d59e14df8174254';\r\n  useEffect(() => {\r\n    if (!auth.token) {\r\n      console.log('no auth token ran')\r\n      checkAuth()\r\n      displayChatRooms()\r\n    } else {\r\n      console.log('with auth token ran')\r\n      displayChatRooms()\r\n    }\r\n  }, [checkAuth])\r\n\r\n  return (\r\n    <div className='wrapper d-flex align-items-stretch'>\r\n      <Router history={history}>\r\n        <>\r\n          <Sidebar />\r\n          <Switch>\r\n            <Route path='/' exact component={Home} />\r\n            <ProtectedRoute path='/chats/:id' auth={auth.isLoggedIn} component={Chat} />\r\n          </Switch>\r\n        </>\r\n      </Router>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    auth: state.auth,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { checkAuth, displayChatRooms })(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store';\r\nimport App from './App';\r\n\r\nconsole.log('ENV:', process.env.NODE_ENV)\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.querySelector('#root')\r\n);\r\n"],"sourceRoot":""}
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{147:function(e,a,t){e.exports=t(301)},257:function(e,a){},299:function(e,a,t){},300:function(e,a,t){},301:function(e,a,t){"use strict";t.r(a);var n,c=t(0),r=t.n(c),o=t(24),s=t.n(o),l=t(12),m=t(9),i=t(141),u=t(305),d=t(4),h={isLoggedIn:!1,_id:null,token:null,data:{}},p=t(39),f=t(29),b=t(46),E=t.n(b),v=[],g=Object(m.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CHECK_AUTH":case"LOG_IN":return Object(d.a)(Object(d.a)({},e),a.payload);case"LOG_OUT":return Object(d.a)(Object(d.a)({},e),h);case"UPDATE_USER":return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),a.payload)});default:return e}},chatRooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_CHATROOM":return Object(d.a)(Object(d.a)({},e),{},Object(f.a)({},a.payload._id,Object(d.a)({},a.payload)));case"DISPLAY_CHATROOMS":return Object(d.a)(Object(d.a)({},e),E.a.mapKeys(a.payload,"_id"));case"CLOSE_CHAT":return Object(d.a)(Object(d.a)({},e),E.a.omit(e,a.payload));case"NEW_MESSAGE":return Object(d.a)(Object(d.a)({},e),{},Object(f.a)({},a.payload.chatRoomId,Object(d.a)(Object(d.a)({},e[a.payload.chatRoomId]),{},{messages:[].concat(Object(p.a)(e[a.payload.chatRoomId].messages),[a.payload.message])})));case"LOAD_MESSAGES":return Object(d.a)(Object(d.a)({},e),{},Object(f.a)({},a.payload.chatRoomId,Object(d.a)(Object(d.a)({},e[a.payload.chatRoomId]),{},{messages:[].concat(Object(p.a)(e[a.payload.chatRoomId].messages),Object(p.a)(a.payload.messages))})));case"LOG_OUT":return Object(d.a)(Object(d.a)({},e),v);default:return e}},form:u.a}),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,y=Object(m.e)(g,_(Object(m.a)(i.a))),N=t(10),O=t(16),w=Object(O.a)(),j=t(8),x=t.n(j),k=t(15),C=t(143),R=t.n(C).a.create({baseURL:"https://dsc-chat-app.herokuapp.com",headers:{"Content-Security-Policy":"default-src *"}}),S=t(144);n=t.n(S)()();var I=function(){return function(){var e=Object(k.a)(x.a.mark((function e(a,t){var n,c,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get("/chats");case 3:n=e.sent,c=n.data,r=c.chats.map((function(e){var a=0!==t().chatRooms.length?t().chatRooms[e._id].messages:[];return Object(d.a)(Object(d.a)({},e),{},{messages:Object(p.a)(a)})})),console.log("chatRooms",r),a({type:"DISPLAY_CHATROOMS",payload:Object(d.a)({},r)}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(a,t){return e.apply(this,arguments)}}()};n.on("return-message",(function(e){var a;y.dispatch({type:"NEW_MESSAGE",payload:{chatRoomId:(a=e).chatRoomId,message:a}})}));var A=function(){return function(){var e=Object(k.a)(x.a.mark((function e(a){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("jwt-token")){e.next=3;break}return e.abrupt("return",a({type:"CHECK_AUTH",payload:{isLoggedIn:!1,token:null}}));case 3:return e.next=5,R.get("/user-id",{headers:{Authorization:"Bearer ".concat(t)}});case 5:n=e.sent,a({type:"CHECK_AUTH",payload:{_id:n.data._id,token:t,isLoggedIn:!0,data:n.data}}),I();case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},M=t(18),L=t(11),H=t.n(L),T=t(304),U=t(303),D=Object(U.a)({form:"userForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit((function(a){var t=e.initialValues;if(!t)return e.handleForm(a);Object.keys(a).some((function(e){return""===a[e]}))&&e.reset();var n={};Object.keys(t).forEach((function(e){t[e]!==a[e]&&(n=Object(d.a)(Object(d.a)({},n),{},Object(f.a)({},e,a[e])))})),e.handleForm(n)})),className:"form-signin mt-2"},e.children)})),z=function(e){var a=function(e){var a=e.input,t=e.label,n=e.type;return r.a.createElement("div",null,r.a.createElement("label",{className:"text-white text-left my-2"},t),r.a.createElement("input",Object.assign({className:"form-control",placeholder:t},a,{type:n,required:!0})))};return r.a.createElement(D,{handleForm:function(a){e.handleForm(a)}},r.a.createElement("div",{className:"ui stacked element"},r.a.createElement(T.a,{name:"username",component:a,label:"Username",type:"text"}),r.a.createElement(T.a,{name:"password",component:a,label:"Password",type:"password"}),r.a.createElement("button",{className:"btn btn-md btn-secondary btn-block my-4 mx-auto w-25"},"Submit")),r.a.createElement("div",{className:"d-flex w-100 justify-content-center text-white"},r.a.createElement("div",{className:"col"},r.a.createElement("p",{className:"m-0 p-0"},"Sample User Credentials"),r.a.createElement("p",{className:"m-0 p-0"},"Username: sampleuser"),r.a.createElement("p",{className:"m-0 p-0"},"Password: examplepass000"))))},F=function(e){var a=function(e){var a=e.input,t=e.label,n=e.type;return r.a.createElement("div",null,r.a.createElement("label",{className:"text-white text-left my-2"},t),r.a.createElement("input",Object.assign({className:"form-control",type:n,placeholder:t},a,{required:!0})))};return r.a.createElement(D,{handleForm:function(a){e.handleForm(a)}},r.a.createElement(T.a,{name:"name",component:a,label:"Name",type:"text"}),r.a.createElement(T.a,{name:"username",component:a,label:"Username",type:"text"}),r.a.createElement(T.a,{name:"email",component:a,label:"Email",type:"email"}),r.a.createElement(T.a,{name:"password",component:a,label:"Password",type:"password"}),r.a.createElement(T.a,{name:"passwordConf",component:a,label:"Confirm Password",type:"password"}),r.a.createElement("button",{className:"btn btn-md btn-secondary btn-block mt-4 mx-auto w-50"},"Submit"))},V=Object(l.b)(null,{signup:function(e){return function(){var a=Object(k.a)(x.a.mark((function a(t){var n,c,r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n="5f52268b6d59e14df8174254",a.next=3,R.post("/create-user",Object(d.a)({},e));case 3:if(c=a.sent,console.log(c),!c.data.error){a.next=9;break}return 11e3===(r=c.data.error).code&&alert('The username "'.concat(r.keyValue.username,'" has already been taken.')),a.abrupt("return");case 9:t({type:"CHECK_AUTH",payload:{_id:c.data.user._id,token:c.data.token,isLoggedIn:!0,data:c.data.user}}),w.push("/chats/".concat(n));case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},login:function(e){return function(){var a=Object(k.a)(x.a.mark((function a(t){var n,c,r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n="5f52268b6d59e14df8174254",a.next=3,R.post("/login-user",Object(d.a)({},e));case 3:if(!(c=a.sent).data.error){a.next=8;break}return r=c.data.error,alert("".concat(r.message)),a.abrupt("return");case 8:localStorage.setItem("jwt-token",c.data.token),t({type:"LOG_IN",payload:{_id:c.data.user._id,token:c.data.token,isLoggedIn:!0,data:c.data.user}}),w.push("/chats/".concat(n));case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var a=Object(c.useState)("signup"),t=Object(M.a)(a,2),n=t[0],o=t[1],s=function(a){e.signup(a)},l=function(a){e.login(a)},m=function(){"signup"===n&&o("login"),"login"===n&&o("signup")};return r.a.createElement("div",{className:"landing__area col"},r.a.createElement("div",{className:"landing__container container pb-3 px-3 bg-dark"},r.a.createElement("div",{className:"row mb-2"},r.a.createElement("div",{className:"col p-0"},r.a.createElement("button",{onClick:function(){return m()},className:H()({"btn btn-large text-white w-100 p-3":!0,"btn-outline-dark":"signup"===n,"btn-secondary":"login"===n}),disabled:"signup"===n},"Sign Up Here!")),r.a.createElement("div",{className:"col h-100 p-0"},r.a.createElement("button",{onClick:function(){return m()},className:H()({"btn btn-large text-white w-100 p-3":!0,"btn-outline-dark disabled":"login"===n,"btn-secondary":"signup"===n}),disabled:"login"===n},"Log In Here!"))),"signup"===n?r.a.createElement(F,{handleForm:s}):r.a.createElement(z,{handleForm:l})))})),B=t(67),P=t.n(B),G=Object(l.b)((function(e){return{auth:e.auth}}))((function(e){var a=e.messages,t=e.auth,n=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=n.current.lastElementChild;if(e){var a=getComputedStyle(e.lastElementChild),t=parseInt(a.marginBottom),c=n.current.offsetHeight+t,r=n.current.offsetHeight;n.current.scrollHeight-c<=n.current.scrollTop+r&&(n.current.scrollTop=n.current.scrollHeight)}}),[a.length]);return r.a.createElement("div",{className:"chat__container"},r.a.createElement("ul",{className:"chat__display chat__display-scroll ",ref:n},a?Object.keys(a).map((function(e){var n,c=(n=a[e].createdAt,P()(n).format("h:mm A"));return"systemManager"===a[e].author?r.a.createElement("li",{key:1e3*Math.random(),className:"chat__message chat__message-system"},r.a.createElement("div",{key:e,className:"text-white text-left"},a[e].message)):a[e].userId!==t._id?r.a.createElement("li",{key:e,className:"chat__messages chat__messages-rec"},r.a.createElement("div",{className:"chat__bubble chat__bubble-rec"},r.a.createElement("div",{className:"chat__content px-2 py-1"},r.a.createElement("div",{className:"chat__area py-0 mr-1"},r.a.createElement("p",{className:"chat__text chat__text-author"},a[e].author),r.a.createElement("p",{className:"chat__text chat__text-message"},a[e].message)),r.a.createElement("div",{className:"chat__footer ml-1"},r.a.createElement("div",{className:"chat__timestamp"},c))))):r.a.createElement("li",{key:e,className:"chat__messages chat__messages-sent"},r.a.createElement("div",{className:"chat__bubble chat__bubble-sent"},r.a.createElement("div",{className:"chat__content px-2 py-1"},r.a.createElement("div",{className:"chat__area py-0 mr-1"},r.a.createElement("p",{className:"chat__text chat__text-message"},a[e].message)),r.a.createElement("div",{className:"chat__footer ml-1 text-white"},r.a.createElement("div",{className:"chat__timestamp"},c)))))})):r.a.createElement("div",{className:"text-white"},"Send a message!!")))})),q=Object(l.b)((function(e){return{auth:e.auth,defaultChatRoom:e.chatRooms.defaultChatRoom,chatRooms:e.chatRooms}}),{sendMessage:function(e){var a=e.chatRoomId,t=e.message,c=e.userId,r=e.author;return function(){var e=Object(k.a)(x.a.mark((function e(o){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("send message ran"),console.log(a),n.emit("message",{chatRoomId:a,message:t,userId:c,author:r});case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},checkAuth:A,joinChatRoom:function(e,a){return function(){var t=Object(k.a)(x.a.mark((function t(c){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.emit("join",{room:e,userName:a},(function(e){console.info("connected to ".concat(e))}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},leaveChatRoom:function(e,a){return function(){var t=Object(k.a)(x.a.mark((function t(c){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.emit("leave",{room:e,userName:a},(function(e){console.log("leaving ".concat(e))}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fetchMessages:function(e){return function(){var a=Object(k.a)(x.a.mark((function a(t){var n,c;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R.get("/messages?chatRoomId=".concat(e));case 2:n=a.sent,c=n.data,t({type:"LOAD_MESSAGES",payload:{chatRoomId:e,messages:c.messages}});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},displayChatRooms:I})((function(e){var a=e.chatRooms,t=e.auth,n=e.computedMatch,o=e.sendMessage,s=e.joinChatRoom,l=e.leaveChatRoom,m=e.fetchMessages;console.log(n.params.id);var i=Object(c.useState)(""),u=Object(M.a)(i,2),d=u[0],h=u[1],p=Object(c.useState)(n.params.id),f=Object(M.a)(p,2),b=f[0],E=f[1],v=Object(c.useState)({}),g=Object(M.a)(v,2),_=g[0];g[1];Object(c.useEffect)((function(){Object.keys(a).forEach((function(e){m(e)}))}),[]),Object(c.useEffect)((function(){l(b,t.data.name),s(n.params.id,t.data.name),E(n.params.id)}),[n.params.id,t.data.name,b,l,s]);return r.a.createElement("div",{className:"chatroom__display bg-secondary"},r.a.createElement("div",{className:"chatroom__container"},r.a.createElement("div",{className:"chatroom__heading"},r.a.createElement("h2",{className:"chatroom__title"},a[b].name)),r.a.createElement(G,{messages:a[b].messages,systemMessage:_}),r.a.createElement("div",{className:"chatroom__input mb-2 mx-auto"},r.a.createElement("form",{className:"w-100",onSubmit:function(e){e.preventDefault(),o({chatRoomId:b,message:d,userId:t._id,author:t.data.username}),h("")}},r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{className:"form-control w-100",placeholder:"Message...",type:"text",value:d,onChange:function(e){h(e.target.value)}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-md btn-outline-secondary "},"Send")))))))})),K=r.a.createElement("svg",{width:"1.2em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-person",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M10 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6 5c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"})),Y=r.a.createElement("svg",{width:"1.2em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-chat-right-text",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M2 1h12a1 1 0 0 1 1 1v11.586l-2-2A2 2 0 0 0 11.586 11H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"})),W=r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-plus-square",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})),J=r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-pencil",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"})),X=function(e){return r.a.createElement("button",{className:H()("icon__button","btn btn-outline-dark p-0",{"text-white":e.icon===e.activeIcon,"text-secondary":e.icon!==e.activeIcon}),disabled:e.icon===e.activeIcon},"profile"===e.icon?K:"chats"===e.icon?Y:void 0)},Q=function(){var e=Object(c.useState)("chats"),a=Object(M.a)(e,2),t=a[0],n=a[1],o=["profile","chats"];return r.a.createElement("div",{className:"sidebar__content"},r.a.createElement("nav",{className:"sidebar__nav"},r.a.createElement("div",{className:"sidebar__row py-4"},r.a.createElement("h2",{className:"text-white"},"WhatsChat")),r.a.createElement("div",{className:"sidebar__row"},r.a.createElement("div",{className:"sidebar__break"})),r.a.createElement("div",{className:"sidebar__row"},r.a.createElement("ul",{className:"sidebar__list list-unstyled components py-3 mb-0"},o.map((function(e){return r.a.createElement("li",{id:"".concat(e,"-cta"),key:e,className:"nav-item",onClick:function(e){return function(e){"profile-cta"===e.currentTarget.id&&n("profile"),"chats-cta"===e.currentTarget.id&&n("chats")}(e)}},r.a.createElement(X,{icon:e,activeIcon:t}))})))),r.a.createElement("div",{className:"sidebar__row"},r.a.createElement("div",{className:"sidebar__break"})),r.a.createElement("div",{className:"sidebar__row"},"profile"===t?r.a.createElement(re,null):"chats"===t?r.a.createElement(se,null):void 0)))},Z=function(e){var a=e.newRoomName.length<5&&0!==e.newRoomName.length?"is-invalid":null;return r.a.createElement("form",{className:"w-100",onSubmit:function(a){e.handleForm(a)}},r.a.createElement("div",{className:"chatroom__form"},r.a.createElement("div",{className:"d-flex justify-content-end col-3 mx-auto"},r.a.createElement("button",{type:"submit",className:"chatroom__cta-new btn p-0"},r.a.createElement("div",{className:"chatroom__new-cta text-secondary"},W))),r.a.createElement("div",{className:"col-9"},r.a.createElement("input",{onChange:function(a){e.onChange(a)},className:"form-control ".concat(a),type:"text",placeholder:"Create Chat Room....",name:"chatForm",required:!0}))))},$=t(145),ee=t(70),ae=t(69),te=t(72),ne=t(71),ce=function(e){var a=e.modalConfig,t=e.setModalDisplay,n=e.modalDisplay,c=e.handleDelete;return n?r.a.createElement($.a,{show:n,onHide:function(){return t(!1)}},r.a.createElement(ne.a,{closeButton:!0},r.a.createElement(te.a,null,a.title)),r.a.createElement(ae.a,null,r.a.createElement("p",null,a.message)),r.a.createElement(ee.a,null,r.a.createElement("button",{onClick:function(){return t(!1)},type:"button",className:"btn btn-secondary"},"Cancel"),r.a.createElement("button",{onClick:function(){return t(!1),void c()},className:"btn btn-".concat(a.btnStyle)},a.btnText))):r.a.createElement(r.a.Fragment,null)},re=Object(l.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(){var e=Object(k.a)(x.a.mark((function e(a,t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t().auth.token,e.next=3,R.post("/logout",{},{headers:{Authorization:"Bearer ".concat(n)}});case 3:return e.next=5,localStorage.removeItem("jwt-token");case 5:a({type:"LOG_OUT"}),w.push("/");case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},updateUser:function(e){return function(){var a=Object(k.a)(x.a.mark((function a(t,n){var c,r,o;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=n().auth.token,a.next=3,R.patch("./user-update",Object(d.a)({},e),{headers:{Authorization:"Bearer ".concat(c)}});case 3:if(!(r=a.sent).data.error){a.next=8;break}return 11e3===(o=r.data.error).code&&alert('The username "'.concat(o.keyValue.username,'" has already been taken.')),a.abrupt("return");case 8:t({type:"UPDATE_USER",payload:r.data.user});case 9:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},deleteUser:function(){return function(){var e=Object(k.a)(x.a.mark((function e(a,t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t().auth.token,e.next=3,R.post("/user-delete",{},{headers:{Authorization:"Bearer ".concat(n)}});case 3:if(!e.sent.data.userDeleted){e.next=9;break}return e.next=7,localStorage.removeItem("jwt-token");case 7:a({type:"LOG_OUT"}),w.push("/");case 9:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()}})((function(e){var a=e.auth,t=e.logout,n=e.updateUser,o=e.deleteUser,s=Object(c.useState)(""),l=Object(M.a)(s,2),m=l[0],i=l[1],u=Object(c.useState)(!1),d=Object(M.a)(u,2),h=d[0],p=d[1],f=function(e){n(e),i("")},b=function(e){var a=e.input,t=e.label,n=e.meta,c="field ".concat(n.error&&n.touched?"error":"");return r.a.createElement("li",{className:"list-group-item px-3"},r.a.createElement("div",{className:"row justify-content-between align-items-center ".concat(c)},r.a.createElement("div",{className:"col-3 text-left p-0"},r.a.createElement("label",{className:"m-auto font-weight-bold"},t)),r.a.createElement("div",{className:"col-7"},m===t?r.a.createElement("input",Object.assign({className:"form-control text-left"},a)):r.a.createElement("input",Object.assign({className:"form-control-plaintext text-left"},a))),r.a.createElement("div",{onClick:function(){return i(t)},className:"col-1 text-secondary"},J),function(e){var a=e.error;if(e.touched&&a)return r.a.createElement("div",{className:"ui error message"},r.a.createElement("div",{className:"header"},a))}(n)))},v=a.isLoggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-img-top mx-auto"},r.a.createElement("img",{className:"mx-auto mt-3",src:"data:image/png;base64,".concat(a.data.avatar),height:"150",width:"150",alt:"avatar"})),r.a.createElement("div",{className:"card-body"},r.a.createElement(D,{handleForm:f,initialValues:E.a.pick(a.data,"name","username","email","password")},r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement(T.a,{name:"name",component:b,label:"Name"}),r.a.createElement(T.a,{name:"username",component:b,label:"Username"}),r.a.createElement(T.a,{name:"email",component:b,label:"Email"}),r.a.createElement(T.a,{name:"password",component:b,label:"Password"}),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col text-center"},"User Since: ",P()(a.data.createdAt).format("MMM 'YY"))))),r.a.createElement("input",{type:"submit",className:"profile__submit",tabIndex:"-1"})),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("button",{onClick:function(){return t()},className:"btn btn-secondary mt-2"},"Log Out")),r.a.createElement("li",{className:"list-group-item "},r.a.createElement("button",{onClick:function(){return p(!0)},className:"btn btn-danger",disabled:"5f637fdd0a41ae691c828e50"===a.data._id},"Delete Account")))))):r.a.createElement("div",{className:"text-white"},"Log in to see your profile");return r.a.createElement("div",{className:"d-flex flex-column m-3",style:{width:"90%"}},v,r.a.createElement(ce,{modalConfig:{title:"Delete Account",message:"Are you sure you want to delete your account?",btnText:"Delete",btnStyle:"danger"},setModalDisplay:p,modalDisplay:h,handleDelete:function(){o()}}))})),oe=t(64),se=Object(l.b)((function(e){return{auth:e.auth,chatRooms:e.chatRooms}}),{createChatRoom:function(e,a){return function(){var t=Object(k.a)(x.a.mark((function t(n){var c,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.post("/create-chatRoom",{name:e,createdBy:a});case 3:c=t.sent,r=c.data,n({type:"ADD_CHATROOM",payload:Object(d.a)(Object(d.a)({},r.chat),{},{messages:[]})}),w.push("/chats/".concat(r.chat._id)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:"ERROR",error:"Invalid Name"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},displayChatRooms:I,closeChat:function(e){return function(){var a=Object(k.a)(x.a.mark((function a(t){return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.emit("leave",{room:e}),t({type:"CLOSE_CHAT",payload:e});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var a=e.auth,t=e.chatRooms,n=e.displayChatRooms,o=e.createChatRoom,s=e.closeChat,l=Object(c.useState)(""),m=Object(M.a)(l,2),i=m[0],u=m[1],d=Object.keys(t).length;Object(c.useEffect)((function(){a.token&&n()}),[d,a.token,n]);var h=function(e){u(e.target.value)},p=function(e){e.preventDefault(),i.length>=5&&(o(i,a._id),u(""))},f=function(){if(t!=={})return Object.keys(t).map((function(e){return r.a.createElement("li",{key:t[e]._id,className:"chatroom__item"},r.a.createElement("div",{className:"chatroom__icon col-2 my-auto text-secondary"},K),r.a.createElement("div",{className:"col-8"},r.a.createElement(oe.a,{className:"chatroom__chatroom",to:{pathname:"/chats/".concat(e)}},r.a.createElement("div",{className:"col text-center"},t[e].name))),r.a.createElement("div",{className:"chatroom__cta-col"},r.a.createElement("button",{onClick:function(){return function(e){s(e)}(e)},className:"chatroom__cta-close p-0 text-secondary"},r.a.createElement("p",{className:"chatroom__close"},"\ud83d\uddd9"))))}))},b=a.isLoggedIn?r.a.createElement("ul",{className:"chatroom__list list-unstyled"},r.a.createElement("li",{className:"chatroom__new"},r.a.createElement(Z,{handleForm:p,onChange:h,newRoomName:i})),f()):r.a.createElement("div",{className:"text-white"},"Log in to see your profile");return r.a.createElement("div",{className:"chatroom__list my-3"},b)})),le=t(146),me=function(e){var a=e.component,t=(e.path,Object(le.a)(e,["component","path"]));return r.a.createElement(N.b,Object.assign({exact:!0},t,{render:function(){return t.auth?r.a.createElement(a,t):r.a.createElement(N.a,{to:"/"})}}))},ie=(t(299),t(300),Object(l.b)((function(e){return{auth:e.auth}}),{checkAuth:A,displayChatRooms:I})((function(e){var a=e.auth,t=e.checkAuth,n=e.displayChatRooms;console.log(w);return Object(c.useEffect)((function(){a.token?(console.log("with auth token ran"),n()):(console.log("no auth token ran"),t(),n())}),[]),r.a.createElement("div",{className:"wrapper d-flex align-items-stretch"},r.a.createElement(N.c,{history:w},r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(N.d,null,r.a.createElement(N.b,{path:"/",exact:!0},a.isLoggedIn?r.a.createElement(N.a,{to:"/chats/".concat("5f52268b6d59e14df8174254")}):r.a.createElement(V,null)),r.a.createElement(me,{path:"/chats/:id",auth:a.isLoggedIn,component:q})))))})));s.a.render(r.a.createElement(l.a,{store:y},r.a.createElement(ie,null)),document.querySelector("#root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.70d6eb01.chunk.js.map